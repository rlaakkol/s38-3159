\documentclass{beamer}
%
% Choose how your presentation looks.
%
% For more themes, color themes and font themes, see:
% http://deic.uab.es/~iblanes/beamer_gallery/index_by_theme.html
%
\mode<presentation>
{
  \usetheme{Warsaw}      % or try Darmstadt, Madrid, Warsaw, ...
  \usecolortheme{default} % or try albatross, beaver, crane, ...
  \usefonttheme{default}  % or try serif, structurebold, ...
  \setbeamertemplate{navigation symbols}{}
  \setbeamertemplate{caption}[numbered]
  } 

  \usepackage[english]{babel}
  \usepackage[utf8]{inputenc}
  \usepackage[ELEC]{aaltologo}
  \usepackage{verbatim}


  \title[SFO protocol]{aNSA is Not a Sensor Aggregator\\Protocol Specification Phase 2 Changes}
  \author{Riku Lääkkölä \and Tero Marttila \and Tero Paloheimo}
  \institute{Aalto ELEC}
  \date{11.3.2014}
%\logo{\AaltoLogoRandomSmall{0.3}}

\begin{document}

\begin{frame}
\titlepage
\end{frame}

\begin{frame}{Header format}
\begin{itemize}
	\item Header format remains compatible, but changes to payload
	\item Bumped magic (\texttt{0x43})
	\item Replace AckThis-flag with a NoAck-flag in the type field
	\item Added a new Compression-flag (also in type field)
	\item New flags are compatible with old header layout
\end{itemize}
\end{frame}

\begin{frame}{Ambient Sound Detector}
\begin{itemize}
	\item Continuous stream of medium-sized packets
	\item ASD packets are smaller than Camera packets!
	\item Existing implementation handles these
	\item Performance of packets/s limiting factor?
\end{itemize}
\end{frame}

\begin{frame}{Aggregation}
\begin{itemize}
%	\item TODO: Sensor type specific listing of available aggregation methods in subscribe-queryresponse
	\item Altered \emph{PUBLISH} message payload syntax
	\item Extended \emph{SUBSCRIBE} message payload syntax
	\item Subscribe message can include an "aggregation expression" for each subscribed sensor name.
	\item Aggregation expression includes aggregation method and parameters, at least \emph{interval}
\end{itemize}
\end{frame}

\begin{frame}[fragile]{Aggregation: Example}
\footnotesize
\begin{verbatim}
S       { 'temp:1': { 'aggregate': 'last', 'interval': 10, 'step': 2 } }
    S   { 'temp:1': 1 }
    P   { 'temp:1': [
            { 'temp:1': -9.7, 'ts': 1394197037.09 }
            { 'temp:1': -9.8, 'ts': 1394197039.55 }
            { 'temp:1': -9.9, 'ts': 1394197041.72 }
            { 'temp:1': -9.10, 'ts': 1394197043.17 }
            { 'temp:1': -9.11, 'ts': 1394197045.27 }
        ] }
\end{verbatim}
\end{frame}

\begin{frame}{Fragmentation}
\begin{itemize}
	\item IP-layer fragmentation and reassembly of large UDP datagrams
	\item 	Packet loss probability increases $\sim$ exponentially with packet size \\
			$P_{loss} = 1 - ((1 - P_{loss_i})^{size / MTU})$
	\item Problematic for subscription messages include complete sensor set
	\item Workaround: payload compression
	\item Solution: implement multiple subscription "channels" using 16-bit reserved header field.
\end{itemize}
\end{frame}

\begin{frame}{Security considerations}
\begin{itemize}
  \item Subscribe-query and subscribe-response provide a means for DDoSing
  \begin{itemize}
    \item Emulate a three-way TCP handshake to prevent DDoSing
  \end{itemize}
  \item Improper parameters to aggregation function parameters may cause
  resource drain on the server
  \item Implement authentication to prevent spoofed servers and sending fake
  sensor values
  \item \emph{subscribe-query} remains DoS-able for reflection/amplification purposes
\end{itemize}
\end{frame}

\begin{frame}{Conclusion}
\begin{itemize}
\item ASDFASDFASDFDSAFDSAFDSAFASDFASDFASDFASDF
\item ASDFASDFASDFDSAFDSAFDSAFASDFASDFASDFASDF
\item ASDFASDFASDFDSAFDSAFDSAFASDFASDFASDFASDF
\item ASDFASDFASDFDSAFDSAFDSAFASDFASDFASDFASDF
\item ASDFASDFASDFDSAFDSAFDSAFASDFASDFASDFASDF
\end{itemize}
\end{frame}

\end{document}
